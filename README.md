# ExploreWithMe 🎯

**Микросервисная платформа для организации мероприятий с высокой нагрузкой и отказоустойчивой архитектурой**

## 🎯 Обзор проекта

**ExploreWithMe** — это высоконагруженная платформа для организации и поиска мероприятий. Система позволяет пользователям создавать события, подбирать интересные мероприятия, оставлять заявки на участие и комментировать события.

### 🎯 Ключевые возможности

- ✅ Создание и управление событиями (концерты, выставки, мастер-классы)
- ✅ Публичные и приватные API для различных категорий пользователей
- ✅ Система заявок на участие с модерацией
- ✅ Комментирование событий с системой модерации
- ✅ Подборки мероприятий (тематические коллекции)
- ✅ Статистика просмотров и аналитика популярности
- ✅ Поиск и фильтрация по различным критериям

### 👥 Роли пользователей

| Роль                     | Описание                     | Доступные возможности                                      |
|--------------------------|------------------------------|------------------------------------------------------------|
| **Анонимный пользователь** | Неавторизованный посетитель  | Просмотр событий, поиск, просмотр комментариев             |
| **Зарегистрированный пользователь** | Авторизованный пользователь  | Создание событий, подача заявок, комментирование           |
| **Администратор**        | Модератор системы            | Управление событиями, категориями, пользователями, комментариями |

## 🏗️ Архитектура

### 📊 Общая схема архитектуры
┌─────────────────────────────────────────────────────────────┐
│                   Клиентское приложение                     │
└──────────────────────────────┬──────────────────────────────┘
                               │
┌──────────────────────────────▼──────────────────────────────┐
│                API Gateway (порт: 8080)                     │
│                  Spring Cloud Gateway                       │
└─────────────┬───────────────┬─────────────┬─────────────────┘
              │               │             │
        ┌─────▼───────┐ ┌─────▼────┐   ┌────▼─────┐
        │ Eureka      │ │ Config   │   │ Gateway  │
        │ Server      │ │ Server   │   │ Routes   │
        │ (порт 8761) │ │          │   │          │
        └─────────────┘ └──────────┘   └──────────┘

┌────────────────────────────────────────────────────────────┐
│ Микросервисы (Core)                                        │
└─────┬──────────────┬──────────────┬─────────────┬──────────┘
      │              │              │             │
┌─────▼────┐   ┌─────▼────┐  ┌──────▼────┐   ┌────▼────┐
│ Event    │   │ User     │  │ Request   │   │ Comment │
│ Service  │   │ Service  │  │ Service   │   │ Service │
│ (5433)   │   │ (5432)   │  │ (5434)    │   │ (5435)  │
└──────────┘   └──────────┘  └───────────┘   └─────────┘
      │            │             │               │
┌─────▼────┐ ┌─────▼────┐ ┌──────▼────┐     ┌────▼──────┐
│    Event │ │     User │ │ Request   │     │ Comment   │
│     DB   │ │    DB    │ │    DB     │     │    DB     │
│    5433  │ │   5432   │ │   5434    │     │   5435    │
└──────────┘ └──────────┘ └───────────┘     └───────────┘

┌─────────────────────────────────────────────────────────────┐
│ Статистика (Stats)                                          │
└──────────────────────────────┬──────────────────────────────┘
                               │
                        ┌──────▼──────┐
                        │ Stats       │
                        │ Server      │
                        │ (5436)      │
                        └──────┬──────┘
                               │
                        ┌──────▼──────┐
                        │ Stats DB    │
                        │ 5436        │
                        └─────────────┘



### 🔄 Поток данных

1. **Входящий запрос** → API Gateway (порт 8080)
2. **Маршрутизация** → Соответствующий микросервис через Eureka
3. **Обработка** → Бизнес-логика в микросервисе
4. **Хранение** → Выделенная БД для каждого сервиса
5. **Межсервисное взаимодействие** → Feign Clients + Resilience4j
6. **Статистика** → Отправка hit'ов в stats-server

## 🛠️ Технологический стек

### 📦 Backend

| Технология       | Версия    | Назначение                          |
|------------------|-----------|-------------------------------------|
| Java             | 21        | Основной язык программирования      |
| Spring Boot      | 3.4.5     | Фреймворк для микросервисов         |
| Spring Cloud     | 2024.0.0  | Микросервисная экосистема           |
| PostgreSQL       | 16        | Реляционная база данных             |
| Maven            | 3.8+      | Система сборки                      |

### ☁️ Микросервисная инфраструктура

| Компонент              | Технология               | Назначение                          |
|------------------------|--------------------------|-------------------------------------|
| Service Discovery      | Spring Cloud Netflix Eureka | Реестр микросервисов             |
| API Gateway            | Spring Cloud Gateway     | Единая точка входа                  |
| Configuration Server   | Spring Cloud Config      | Централизованные настройки          |
| Circuit Breaker        | Resilience4j             | Отказоустойчивость                  |
| HTTP Client            | OpenFeign                | Межсервисная коммуникация           |

### 🗄️ Базы данных

| Сервис          | БД          | Порт  | Описание                     |
|-----------------|-------------|-------|------------------------------|
| User Service    | user_db     | 5432  | Пользователи и профили       |
| Event Service   | event_db    | 5433  | События и категории          |
| Request Service | request_db  | 5434  | Заявки на участие            |
| Comment Service | comment_db  | 5435  | Комментарии к событиям       |
| Stats Service   | stats       | 5436  | Статистика просмотров        |

### 🧪 Тестирование и качество

| Инструмент      | Назначение                          |
|-----------------|-------------------------------------|
| JUnit 5         | Unit-тестирование                   |
| Mockito         | Мокирование зависимостей            |
| Testcontainers  | Интеграционное тестирование         |
| Jacoco          | Покрытие кода тестами               |
| Checkstyle      | Статический анализ кода             |
| SpotBugs        | Поиск багов в коде                  |

## 📁 Структура проекта

### 🔄 Поток данных

1. **Входящий запрос** → API Gateway (порт 8080)
2. **Маршрутизация** → Соответствующий микросервис через Eureka
3. **Обработка** → Бизнес-логика в микросервисе
4. **Хранение** → Выделенная БД для каждого сервиса
5. **Межсервисное взаимодействие** → Feign Clients + Resilience4j
6. **Статистика** → Отправка hit'ов в stats-server